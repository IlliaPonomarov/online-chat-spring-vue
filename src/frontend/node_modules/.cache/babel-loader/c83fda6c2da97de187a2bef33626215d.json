{"ast":null,"code":"import SockJS from \"sockjs-client\";\nimport Stomp from \"webstomp-client\";\nimport AuthService from \"@/services/auth.service\";\nimport ChatService from \"@/services/chat.service\";\nimport axios from \"axios\";\nexport default {\n  name: \"MyChat\",\n\n  data() {\n    return {\n      received_messages: Array,\n      your_messages: Array,\n      selected_chat: Object,\n      auth_user: JSON.parse(localStorage.getItem(\"user\")),\n      chats: [{\n        id: Number,\n        title: String,\n        messageTime: Date,\n        lastMessage: String,\n        messageCount: Number,\n        personList: Array,\n        messages: Array\n      }],\n      person_id: Number,\n      send_message: null,\n      chat_messages: Map,\n      connected: false,\n      test: null\n    };\n  },\n\n  methods: {\n    selectChat(selected_chat) {\n      this.selected_chat = selected_chat;\n    },\n\n    logout() {\n      this.$store.dispatch('auth/logout').then(() => {\n        this.$router.push('/auth/login');\n      });\n    },\n\n    send() {\n      let person = this.selected_chat.messages.find(message => message.sender === this.auth_user['username']);\n      this.selected_chat.messages.push({\n        'id': this.selected_chat.messages[this.selected_chat.messages.length - 1].id++,\n        'message': this.send_message,\n        'person_id': person.person_id,\n        'sendAt': Date.now(),\n        'sender': this.auth_user['username']\n      });\n      console.log(\"Send message:\" + this.send_message);\n\n      if (this.stompClient && this.stompClient.connected && this.send_message !== null) {\n        const msg = {\n          name: this.send_message\n        };\n        console.log(JSON.stringify(msg));\n        this.stompClient.send(\"/app/chat\", JSON.stringify(msg), {});\n      }\n\n      this.send_message = null;\n    },\n\n    connect() {\n      this.socket = new SockJS(\"http://localhost:8022/gs-chat\");\n      this.stompClient = Stomp.over(this.socket);\n      this.stompClient.connect({\n        \"Authorization\": \"Bearer \" + AuthService.getToken()\n      }, frame => {\n        console.log(\"FUCK   \" + frame);\n        this.connected = true;\n        this.stompClient.subscribe(\"/topic/chat\", tick => {\n          this.received_messages.push(JSON.parse(tick.body).content);\n        });\n      }, error => {\n        console.log(error.body);\n        this.connected = false;\n      });\n    },\n\n    async getAllChats() {\n      await axios.get(\"http://localhost:8022/api/chats/\", {\n        headers: {\n          Authorization: localStorage.getItem(\"Authorization\")\n        }\n      }).then(response => {\n        for (let i = 0; i < response.data.length; i++) {\n          let dataChat = {\n            id: response.data[i].id,\n            title: response.data[i].title,\n            messageTime: response.data[i].messageTime,\n            lastMessage: response.data[i].lastMessage,\n            messageCount: response.data[i].messageCount,\n            personList: response.data[i].personList,\n            messages: response.data[i].messages\n          };\n          console.log(dataChat);\n          this.chats.push(dataChat);\n        }\n      }).catch(error => alert(error));\n      this.chats.splice(0, 1);\n    },\n\n    disconnect() {\n      if (this.stompClient) {\n        this.stompClient.disconnect();\n      }\n\n      this.connected = false;\n    },\n\n    tickleConnection() {\n      this.connected ? this.disconnect() : this.connect();\n    }\n\n  },\n\n  async mounted() {\n    await this.getAllChats();\n    this.person_id = this.selected_chat.messages.find(message => message.sender === this.auth_user['username']).person_id;\n    alert(this.person_id);\n    this.connect();\n  }\n\n};","map":{"version":3,"mappings":"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","names":["SockJS","Stomp","AuthService","ChatService","axios","name","data","received_messages","Array","your_messages","selected_chat","Object","auth_user","JSON","parse","localStorage","getItem","chats","id","Number","title","String","messageTime","Date","lastMessage","messageCount","personList","messages","person_id","send_message","chat_messages","Map","connected","test","methods","selectChat","logout","$store","dispatch","then","$router","push","send","person","find","message","sender","length","now","console","log","stompClient","msg","stringify","connect","socket","over","getToken","frame","subscribe","tick","body","content","error","getAllChats","get","headers","Authorization","response","i","dataChat","catch","alert","splice","disconnect","tickleConnection","mounted"],"sourceRoot":"","sources":["C:\\Users\\hp\\IdeaProjects\\online-chat-spring-vue\\src\\frontend\\src\\pages\\Chat.vue"],"sourcesContent":["<template>\r\n    <div class=\"container mx-auto\">\r\n      <div class=\"min-w-full border rounded lg:grid lg:grid-cols-3\">\r\n        <div class=\"border-r border-gray-300 lg:col-span-1\" style=\"background-color: #0088cc\">\r\n          <div class=\"mx-3 my-3\">\r\n            <div class=\"relative text-gray-600\">\r\n                <span class=\"absolute inset-y-0 left-0 flex items-center pl-2\">\r\n                  <svg fill=\"none\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\"\r\n                       viewBox=\"0 0 24 24\" class=\"w-6 h-6 text-gray-300\">\r\n                    <path d=\"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z\"></path>\r\n                  </svg>\r\n                </span>\r\n              <input type=\"search\" class=\"block w-full py-2 pl-10 bg-gray-100 rounded outline-none\" name=\"search\"\r\n                     placeholder=\"Search\" required />\r\n            </div>\r\n          </div>\r\n\r\n          <ul class=\"overflow-auto h-[32rem]\">\r\n            <li  v-for=\"chat in chats\" :key=\"chat.id\" >\r\n              <div v-if=\"chats.title !== 'function String() { [native code] }' \">\r\n                  <a\r\n                      @click=\"selectChat(chat)\"\r\n                      class=\"flex items-center px-3 py-2 text-sm transition duration-150 ease-in-out border-b border-gray-300 cursor-pointer hover:bg-gray-100 focus:outline-none\">\r\n                    <img class=\"object-cover w-10 h-10 rounded-full\"\r\n                         src=\"https://cdn.pixabay.com/photo/2018/09/12/12/14/man-3672010__340.jpg\" alt=\"username\" />\r\n                    <div class=\"w-full pb-2\">\r\n                      <div class=\"flex justify-between\">\r\n                        <span class=\"block ml-2 font-semibold text-white\"> {{ chat.title }}</span>\r\n                        <span class=\"block ml-2 text-sm text-gray-600\">{{  chat.messageTime }}</span>\r\n                      </div>\r\n                      <span class=\"block ml-2 text-sm text-gray-600\">{{ chat.lastMessage }}</span>\r\n                    </div>\r\n                  </a>\r\n              </div>\r\n<!--              <a-->\r\n<!--                  class=\"flex items-center px-3 py-2 text-sm transition duration-150 ease-in-out bg-gray-100 border-b border-gray-300 cursor-pointer focus:outline-none\">-->\r\n<!--                <img class=\"object-cover w-10 h-10 rounded-full\"-->\r\n<!--                     src=\"https://cdn.pixabay.com/photo/2016/06/15/15/25/loudspeaker-1459128__340.png\" alt=\"username\" />-->\r\n<!--                <div class=\"w-full pb-2\">-->\r\n<!--                  <div class=\"flex justify-between\">-->\r\n<!--                    <span class=\"block ml-2 font-semibold text-gray-600\">Same</span>-->\r\n<!--                    <span class=\"block ml-2 text-sm text-gray-600\">50 minutes</span>-->\r\n<!--                  </div>-->\r\n<!--                  <span class=\"block ml-2 text-sm text-gray-600\">Good night</span>-->\r\n<!--                </div>-->\r\n<!--              </a>-->\r\n\r\n            </li>\r\n          </ul>\r\n        </div>\r\n\r\n      <!--         START CHAT  -->\r\n\r\n        <div class=\"hidden lg:col-span-2 lg:block bg-white\">\r\n          <div class=\"w-full\">\r\n            <div class=\"relative flex items-center p-3 border-b border-gray-300\">\r\n              <img class=\"object-cover w-10 h-10 rounded-full\"\r\n                   src=\"https://cdn.pixabay.com/photo/2018/01/15/07/51/woman-3083383__340.jpg\" alt=\"username\" />\r\n              <span class=\"block ml-2 font-bold text-gray-600\"> {{ selected_chat.title }}</span>\r\n              <span class=\"absolute w-3 h-3 bg-green-600 rounded-full left-10 top-3\">\r\n                </span>\r\n            </div>\r\n\r\n<!--            -->\r\n            <div class=\"relative w-full p-6 overflow-y-auto h-[40rem]\">\r\n              <ul class=\"space-y-2\" v-for=\"messages in selected_chat.messages\">\r\n\r\n                <!--     FRIEND MESSAGES           -->\r\n\r\n\r\n                <!--      YOUR MESSAGES        -->\r\n                <div v-if=\"messages.sender === this.auth_user['username']\">\r\n                  <li class=\"flex justify-end\">\r\n                    <div class=\"relative max-w-xl px-4 py-2 text-gray-700 bg-gray-100 rounded shadow\">\r\n                      <span class=\"block\">{{ messages.message }}</span>\r\n                    </div>\r\n                  </li>\r\n                </div>\r\n                <div v-else>\r\n                  <li class=\"flex justify-start\">\r\n                    <div class=\"relative max-w-xl px-4 py-2 text-gray-700 rounded shadow\">\r\n                      <span class=\"block\">{{ messages.message }}</span>\r\n                    </div>\r\n                  </li>\r\n                </div>\r\n              </ul>\r\n            </div>\r\n\r\n            <div class=\"flex items-center justify-between w-full p-3 border-t border-gray-300\">\r\n              <button>\r\n                <svg xmlns=\"http://www.w3.org/2000/svg\" class=\"w-6 h-6 text-gray-500\" fill=\"none\" viewBox=\"0 0 24 24\"\r\n                     stroke=\"currentColor\">\r\n                  <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\"\r\n                        d=\"M14.828 14.828a4 4 0 01-5.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z\" />\r\n                </svg>\r\n              </button>\r\n              <button>\r\n                <svg xmlns=\"http://www.w3.org/2000/svg\" class=\"w-5 h-5 text-gray-500\" fill=\"none\" viewBox=\"0 0 24 24\"\r\n                     stroke=\"currentColor\">\r\n                  <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\"\r\n                        d=\"M15.172 7l-6.586 6.586a2 2 0 102.828 2.828l6.414-6.586a4 4 0 00-5.656-5.656l-6.415 6.585a6 6 0 108.486 8.486L20.5 13\" />\r\n                </svg>\r\n              </button>\r\n\r\n              <input type=\"text\" placeholder=\"Message\"\r\n                     class=\"block w-full py-2 pl-4 mx-3 bg-gray-100 rounded-full outline-none focus:text-gray-700\"\r\n                     name=\"message\" v-model=\"send_message\"  required />\r\n              <button>\r\n                <svg xmlns=\"http://www.w3.org/2000/svg\" class=\"w-5 h-5 text-gray-500\" fill=\"none\" viewBox=\"0 0 24 24\"\r\n                     stroke=\"currentColor\">\r\n                  <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\"\r\n                        d=\"M19 11a7 7 0 01-7 7m0 0a7 7 0 01-7-7m7 7v4m0 0H8m4 0h4m-4-8a3 3 0 01-3-3V5a3 3 0 116 0v6a3 3 0 01-3 3z\" />\r\n                </svg>\r\n              </button>\r\n              <button type=\"submit\" @click=\"send\">\r\n                <svg class=\"w-5 h-5 text-gray-500 origin-center transform rotate-90\" xmlns=\"http://www.w3.org/2000/svg\"\r\n                     viewBox=\"0 0 20 20\" fill=\"currentColor\">\r\n                  <path\r\n                      d=\"M10.894 2.553a1 1 0 00-1.788 0l-7 14a1 1 0 001.169 1.409l5-1.429A1 1 0 009 15.571V11a1 1 0 112 0v4.571a1 1 0 00.725.962l5 1.428a1 1 0 001.17-1.408l-7-14z\" />\r\n                </svg>\r\n              </button>\r\n             </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n      </div>\r\n\r\n</template>\r\n\r\n<script>\r\nimport SockJS from \"sockjs-client\";\r\nimport Stomp from \"webstomp-client\";\r\nimport AuthService from \"@/services/auth.service\";\r\nimport ChatService from \"@/services/chat.service\";\r\nimport axios from \"axios\";\r\n\r\nexport default {\r\n  name: \"MyChat\",\r\n\r\n  data() {\r\n    return {\r\n      received_messages: Array,\r\n      your_messages: Array,\r\n      selected_chat: Object,\r\n      auth_user: JSON.parse(localStorage.getItem(\"user\")),\r\n      chats: [{\r\n        id: Number,\r\n        title: String,\r\n        messageTime: Date,\r\n        lastMessage: String,\r\n        messageCount: Number,\r\n        personList: Array,\r\n        messages: Array\r\n      }],\r\n      person_id: Number,\r\n      send_message: null,\r\n      chat_messages: Map,\r\n      connected: false,\r\n      test: null\r\n    };\r\n  },\r\n  methods: {\r\n\r\n    selectChat(selected_chat){\r\n      this.selected_chat = selected_chat;\r\n\r\n\r\n    },\r\n    logout(){\r\n      this.$store.dispatch('auth/logout').then(\r\n          () => {\r\n            this.$router.push('/auth/login')\r\n          },\r\n\r\n      );\r\n    },\r\n\r\n    send() {\r\n\r\n      let person= this.selected_chat.messages.find(message => message.sender === this.auth_user['username']);\r\n\r\n\r\n\r\n      this.selected_chat.messages.push({\r\n        'id' : this.selected_chat.messages[this.selected_chat.messages.length - 1].id++,\r\n        'message' : this.send_message,\r\n        'person_id' : person.person_id,\r\n        'sendAt' : Date.now(),\r\n        'sender' : this.auth_user['username']\r\n      });\r\n\r\n      console.log(\"Send message:\" + this.send_message);\r\n      if (this.stompClient && this.stompClient.connected && this.send_message !== null) {\r\n        const msg = { name: this.send_message };\r\n        console.log(JSON.stringify(msg));\r\n        this.stompClient.send(\"/app/chat\", JSON.stringify(msg), {});\r\n\r\n      }\r\n      this.send_message = null;\r\n    },\r\n\r\n    connect() {\r\n\r\n      this.socket = new SockJS(\"http://localhost:8022/gs-chat\");\r\n      this.stompClient = Stomp.over(this.socket);\r\n\r\n      this.stompClient.connect(\r\n          {\"Authorization\": \"Bearer \" + AuthService.getToken()},\r\n          frame => {\r\n\r\n            console.log(\"FUCK   \" + frame)\r\n            this.connected = true;\r\n            this.stompClient.subscribe(\"/topic/chat\", tick => {\r\n              this.received_messages.push(JSON.parse(tick.body).content);\r\n            });\r\n          },\r\n          error => {\r\n            console.log(error.body);\r\n            this.connected = false;\r\n          }\r\n      );\r\n    },\r\n\r\n    async getAllChats(){\r\n      await axios.get( \"http://localhost:8022/api/chats/\",\r\n          {headers: {Authorization: localStorage.getItem(\"Authorization\")}}\r\n      ).then(response => {\r\n\r\n        for (let i = 0; i < response.data.length ; i++) {\r\n\r\n\r\n          let dataChat = {\r\n            id: response.data[i].id,\r\n            title: response.data[i].title,\r\n            messageTime: response.data[i].messageTime,\r\n            lastMessage: response.data[i].lastMessage,\r\n            messageCount: response.data[i].messageCount,\r\n            personList: response.data[i].personList,\r\n            messages: response.data[i].messages,\r\n          };\r\n\r\n          console.log(dataChat);\r\n\r\n          this.chats.push(dataChat)\r\n        }\r\n      }).catch(error => alert(error));\r\n\r\n      this.chats.splice(0, 1);\r\n\r\n    },\r\n\r\n    disconnect() {\r\n      if (this.stompClient) {\r\n        this.stompClient.disconnect();\r\n      }\r\n      this.connected = false;\r\n    },\r\n\r\n    tickleConnection() {\r\n      this.connected ? this.disconnect() : this.connect();\r\n    }\r\n  },\r\n\r\n\r\n async mounted() {\r\n   await this.getAllChats();\r\n   this.person_id = this.selected_chat.messages.find(message => message.sender === this.auth_user['username']).person_id;\r\n   alert(this.person_id)\r\n   this.connect();\r\n  },\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n\r\n\r\n</style>"]},"metadata":{},"sourceType":"module"}
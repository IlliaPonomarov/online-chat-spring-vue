{"ast":null,"code":"import { createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, renderList as _renderList, Fragment as _Fragment, toDisplayString as _toDisplayString, createCommentVNode as _createCommentVNode, vModelText as _vModelText, withDirectives as _withDirectives, createStaticVNode as _createStaticVNode } from \"vue\";\nconst _hoisted_1 = {\n  class: \"container mx-auto\"\n};\nconst _hoisted_2 = {\n  class: \"min-w-full border rounded lg:grid lg:grid-cols-3\"\n};\nconst _hoisted_3 = {\n  class: \"border-r border-gray-300 lg:col-span-1\",\n  style: {\n    \"background-color\": \"#0088cc\"\n  }\n};\n\nconst _hoisted_4 = /*#__PURE__*/_createStaticVNode(\"<div class=\\\"mx-3 my-3\\\"><div class=\\\"relative text-gray-600\\\"><span class=\\\"absolute inset-y-0 left-0 flex items-center pl-2\\\"><svg fill=\\\"none\\\" stroke=\\\"currentColor\\\" stroke-linecap=\\\"round\\\" stroke-linejoin=\\\"round\\\" stroke-width=\\\"2\\\" viewBox=\\\"0 0 24 24\\\" class=\\\"w-6 h-6 text-gray-300\\\"><path d=\\\"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z\\\"></path></svg></span><input type=\\\"search\\\" class=\\\"block w-full py-2 pl-10 bg-gray-100 rounded outline-none\\\" name=\\\"search\\\" placeholder=\\\"Search\\\" required></div></div>\", 1);\n\nconst _hoisted_5 = {\n  class: \"overflow-auto h-[32rem]\"\n};\nconst _hoisted_6 = {\n  key: 0\n};\nconst _hoisted_7 = [\"onClick\"];\n\nconst _hoisted_8 = /*#__PURE__*/_createElementVNode(\"img\", {\n  class: \"object-cover w-10 h-10 rounded-full\",\n  src: \"https://cdn.pixabay.com/photo/2018/09/12/12/14/man-3672010__340.jpg\",\n  alt: \"username\"\n}, null, -1\n/* HOISTED */\n);\n\nconst _hoisted_9 = {\n  class: \"w-full pb-2\"\n};\nconst _hoisted_10 = {\n  class: \"flex justify-between\"\n};\nconst _hoisted_11 = {\n  class: \"block ml-2 font-semibold text-white\"\n};\nconst _hoisted_12 = {\n  class: \"block ml-2 text-sm text-gray-600\"\n};\nconst _hoisted_13 = {\n  key: 0\n};\nconst _hoisted_14 = {\n  class: \"block ml-2 text-sm text-gray-600\"\n};\nconst _hoisted_15 = {\n  key: 1\n};\n\nconst _hoisted_16 = /*#__PURE__*/_createElementVNode(\"span\", {\n  class: \"block ml-2 text-sm text-gray-600\"\n}, \" New Chat \", -1\n/* HOISTED */\n);\n\nconst _hoisted_17 = [_hoisted_16];\nconst _hoisted_18 = {\n  class: \"hidden lg:col-span-2 lg:block bg-white\"\n};\nconst _hoisted_19 = {\n  class: \"w-full\"\n};\nconst _hoisted_20 = {\n  class: \"relative flex items-center p-3 border-b border-gray-300\"\n};\n\nconst _hoisted_21 = /*#__PURE__*/_createElementVNode(\"img\", {\n  class: \"object-cover w-10 h-10 rounded-full\",\n  src: \"https://cdn.pixabay.com/photo/2018/01/15/07/51/woman-3083383__340.jpg\",\n  alt: \"username\"\n}, null, -1\n/* HOISTED */\n);\n\nconst _hoisted_22 = {\n  class: \"block ml-2 font-bold text-gray-600\"\n};\n\nconst _hoisted_23 = /*#__PURE__*/_createElementVNode(\"span\", {\n  class: \"absolute w-3 h-3 bg-green-600 rounded-full left-10 top-3\"\n}, null, -1\n/* HOISTED */\n);\n\nconst _hoisted_24 = {\n  class: \"relative w-full p-6 overflow-y-auto h-[40rem]\"\n};\nconst _hoisted_25 = {\n  class: \"space-y-2\"\n};\nconst _hoisted_26 = {\n  key: 0\n};\nconst _hoisted_27 = {\n  class: \"flex justify-end\"\n};\nconst _hoisted_28 = {\n  class: \"relative max-w-xl px-4 py-2 text-gray-700 bg-gray-100 rounded shadow\"\n};\nconst _hoisted_29 = {\n  class: \"block\"\n};\nconst _hoisted_30 = {\n  class: \"flex justify-start\"\n};\nconst _hoisted_31 = {\n  class: \"relative max-w-xl px-4 py-2 text-gray-700 rounded shadow\"\n};\nconst _hoisted_32 = {\n  class: \"block\"\n};\nconst _hoisted_33 = {\n  class: \"flex items-center justify-between w-full p-3 border-t border-gray-300\"\n};\n\nconst _hoisted_34 = /*#__PURE__*/_createElementVNode(\"button\", null, [/*#__PURE__*/_createElementVNode(\"svg\", {\n  xmlns: \"http://www.w3.org/2000/svg\",\n  class: \"w-6 h-6 text-gray-500\",\n  fill: \"none\",\n  viewBox: \"0 0 24 24\",\n  stroke: \"currentColor\"\n}, [/*#__PURE__*/_createElementVNode(\"path\", {\n  \"stroke-linecap\": \"round\",\n  \"stroke-linejoin\": \"round\",\n  \"stroke-width\": \"2\",\n  d: \"M14.828 14.828a4 4 0 01-5.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z\"\n})])], -1\n/* HOISTED */\n);\n\nconst _hoisted_35 = /*#__PURE__*/_createElementVNode(\"button\", null, [/*#__PURE__*/_createElementVNode(\"svg\", {\n  xmlns: \"http://www.w3.org/2000/svg\",\n  class: \"w-5 h-5 text-gray-500\",\n  fill: \"none\",\n  viewBox: \"0 0 24 24\",\n  stroke: \"currentColor\"\n}, [/*#__PURE__*/_createElementVNode(\"path\", {\n  \"stroke-linecap\": \"round\",\n  \"stroke-linejoin\": \"round\",\n  \"stroke-width\": \"2\",\n  d: \"M15.172 7l-6.586 6.586a2 2 0 102.828 2.828l6.414-6.586a4 4 0 00-5.656-5.656l-6.415 6.585a6 6 0 108.486 8.486L20.5 13\"\n})])], -1\n/* HOISTED */\n);\n\nconst _hoisted_36 = /*#__PURE__*/_createElementVNode(\"button\", null, [/*#__PURE__*/_createElementVNode(\"svg\", {\n  xmlns: \"http://www.w3.org/2000/svg\",\n  class: \"w-5 h-5 text-gray-500\",\n  fill: \"none\",\n  viewBox: \"0 0 24 24\",\n  stroke: \"currentColor\"\n}, [/*#__PURE__*/_createElementVNode(\"path\", {\n  \"stroke-linecap\": \"round\",\n  \"stroke-linejoin\": \"round\",\n  \"stroke-width\": \"2\",\n  d: \"M19 11a7 7 0 01-7 7m0 0a7 7 0 01-7-7m7 7v4m0 0H8m4 0h4m-4-8a3 3 0 01-3-3V5a3 3 0 116 0v6a3 3 0 01-3 3z\"\n})])], -1\n/* HOISTED */\n);\n\nconst _hoisted_37 = /*#__PURE__*/_createElementVNode(\"svg\", {\n  class: \"w-5 h-5 text-gray-500 origin-center transform rotate-90\",\n  xmlns: \"http://www.w3.org/2000/svg\",\n  viewBox: \"0 0 20 20\",\n  fill: \"currentColor\"\n}, [/*#__PURE__*/_createElementVNode(\"path\", {\n  d: \"M10.894 2.553a1 1 0 00-1.788 0l-7 14a1 1 0 001.169 1.409l5-1.429A1 1 0 009 15.571V11a1 1 0 112 0v4.571a1 1 0 00.725.962l5 1.428a1 1 0 001.17-1.408l-7-14z\"\n})], -1\n/* HOISTED */\n);\n\nconst _hoisted_38 = [_hoisted_37];\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createElementVNode(\"div\", _hoisted_2, [_createElementVNode(\"div\", _hoisted_3, [_hoisted_4, _createElementVNode(\"ul\", _hoisted_5, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($data.chats, chat => {\n    return _openBlock(), _createElementBlock(\"li\", {\n      key: chat.id\n    }, [$data.chats.title !== 'function String() { [native code] }' ? (_openBlock(), _createElementBlock(\"div\", _hoisted_6, [_createElementVNode(\"a\", {\n      onClick: $event => $options.selectChat(chat),\n      class: \"flex items-center px-3 py-2 text-sm transition duration-150 ease-in-out border-b border-gray-300 cursor-pointer hover:bg-gray-100 focus:outline-none\"\n    }, [_hoisted_8, _createElementVNode(\"div\", _hoisted_9, [_createElementVNode(\"div\", _hoisted_10, [_createElementVNode(\"span\", _hoisted_11, _toDisplayString(chat.title), 1\n    /* TEXT */\n    ), _createElementVNode(\"span\", _hoisted_12, _toDisplayString(chat.messageTime), 1\n    /* TEXT */\n    )]), chat.messages.length !== 0 ? (_openBlock(), _createElementBlock(\"div\", _hoisted_13, [_createElementVNode(\"span\", _hoisted_14, _toDisplayString(chat.lastMessage), 1\n    /* TEXT */\n    )])) : (_openBlock(), _createElementBlock(\"div\", _hoisted_15, _hoisted_17))])], 8\n    /* PROPS */\n    , _hoisted_7)])) : _createCommentVNode(\"v-if\", true), _createCommentVNode(\"              <a\"), _createCommentVNode(\"                  class=\\\"flex items-center px-3 py-2 text-sm transition duration-150 ease-in-out bg-gray-100 border-b border-gray-300 cursor-pointer focus:outline-none\\\">\"), _createCommentVNode(\"                <img class=\\\"object-cover w-10 h-10 rounded-full\\\"\"), _createCommentVNode(\"                     src=\\\"https://cdn.pixabay.com/photo/2016/06/15/15/25/loudspeaker-1459128__340.png\\\" alt=\\\"username\\\" />\"), _createCommentVNode(\"                <div class=\\\"w-full pb-2\\\">\"), _createCommentVNode(\"                  <div class=\\\"flex justify-between\\\">\"), _createCommentVNode(\"                    <span class=\\\"block ml-2 font-semibold text-gray-600\\\">Same</span>\"), _createCommentVNode(\"                    <span class=\\\"block ml-2 text-sm text-gray-600\\\">50 minutes</span>\"), _createCommentVNode(\"                  </div>\"), _createCommentVNode(\"                  <span class=\\\"block ml-2 text-sm text-gray-600\\\">Good night</span>\"), _createCommentVNode(\"                </div>\"), _createCommentVNode(\"              </a>\")]);\n  }), 128\n  /* KEYED_FRAGMENT */\n  ))])]), _createCommentVNode(\"         START CHAT  \"), _createElementVNode(\"div\", _hoisted_18, [_createElementVNode(\"div\", _hoisted_19, [_createElementVNode(\"div\", _hoisted_20, [_hoisted_21, _createElementVNode(\"span\", _hoisted_22, _toDisplayString($data.selected_chat.title), 1\n  /* TEXT */\n  ), _hoisted_23]), _createCommentVNode(\"            \"), _createElementVNode(\"div\", _hoisted_24, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($data.selected_chat.messages, messages => {\n    return _openBlock(), _createElementBlock(\"ul\", _hoisted_25, [_createCommentVNode(\"      YOUR MESSAGES        \"), messages.sender === this.auth_user['username'] ? (_openBlock(), _createElementBlock(\"div\", _hoisted_26, [_createElementVNode(\"li\", _hoisted_27, [_createElementVNode(\"div\", _hoisted_28, [_createElementVNode(\"span\", _hoisted_29, _toDisplayString(messages.message), 1\n    /* TEXT */\n    )])])])) : (_openBlock(), _createElementBlock(_Fragment, {\n      key: 1\n    }, [_createCommentVNode(\"     FRIEND MESSAGES           \"), _createElementVNode(\"div\", null, [_createElementVNode(\"li\", _hoisted_30, [_createElementVNode(\"div\", _hoisted_31, [_createElementVNode(\"span\", _hoisted_32, _toDisplayString(messages.message), 1\n    /* TEXT */\n    )])])])], 2112\n    /* STABLE_FRAGMENT, DEV_ROOT_FRAGMENT */\n    ))]);\n  }), 256\n  /* UNKEYED_FRAGMENT */\n  ))]), _createElementVNode(\"div\", _hoisted_33, [_hoisted_34, _hoisted_35, _withDirectives(_createElementVNode(\"input\", {\n    type: \"text\",\n    placeholder: \"Message\",\n    class: \"block w-full py-2 pl-4 mx-3 bg-gray-100 rounded-full outline-none focus:text-gray-700\",\n    name: \"message\",\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $data.send_message = $event),\n    required: \"\"\n  }, null, 512\n  /* NEED_PATCH */\n  ), [[_vModelText, $data.send_message]]), _hoisted_36, _createElementVNode(\"button\", {\n    type: \"submit\",\n    onClick: _cache[1] || (_cache[1] = (...args) => $options.send && $options.send(...args))\n  }, _hoisted_38)])])])])]);\n}","map":{"version":3,"mappings":"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","names":["class","style","_createElementVNode","src","alt","_hoisted_16","xmlns","fill","viewBox","stroke","d","_hoisted_37","_createElementBlock","_hoisted_4","_Fragment","_renderList","$data","chat","key","id","title","_hoisted_6","onClick","$options","_hoisted_8","_toDisplayString","messageTime","messages","length","_hoisted_13","lastMessage","_hoisted_15","_hoisted_17","_createCommentVNode","_hoisted_21","_hoisted_23","sender","auth_user","_hoisted_26","message","_hoisted_34","_hoisted_35","type","placeholder","name","$event","required","_hoisted_36"],"sourceRoot":"","sources":["C:\\Users\\hp\\IdeaProjects\\online-chat-spring-vue\\src\\frontend\\src\\pages\\Chat.vue"],"sourcesContent":["<template>\r\n    <div class=\"container mx-auto\">\r\n      <div class=\"min-w-full border rounded lg:grid lg:grid-cols-3\">\r\n        <div class=\"border-r border-gray-300 lg:col-span-1\" style=\"background-color: #0088cc\">\r\n          <div class=\"mx-3 my-3\">\r\n            <div class=\"relative text-gray-600\">\r\n                <span class=\"absolute inset-y-0 left-0 flex items-center pl-2\">\r\n                  <svg fill=\"none\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\"\r\n                       viewBox=\"0 0 24 24\" class=\"w-6 h-6 text-gray-300\">\r\n                    <path d=\"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z\"></path>\r\n                  </svg>\r\n                </span>\r\n              <input type=\"search\" class=\"block w-full py-2 pl-10 bg-gray-100 rounded outline-none\" name=\"search\"\r\n                     placeholder=\"Search\" required />\r\n            </div>\r\n          </div>\r\n\r\n          <ul class=\"overflow-auto h-[32rem]\">\r\n            <li  v-for=\"chat in chats\" :key=\"chat.id\" >\r\n              <div v-if=\"chats.title !== 'function String() { [native code] }' \">\r\n                  <a\r\n                      @click=\"selectChat(chat)\"\r\n                      class=\"flex items-center px-3 py-2 text-sm transition duration-150 ease-in-out border-b border-gray-300 cursor-pointer hover:bg-gray-100 focus:outline-none\">\r\n                    <img class=\"object-cover w-10 h-10 rounded-full\"\r\n                         src=\"https://cdn.pixabay.com/photo/2018/09/12/12/14/man-3672010__340.jpg\" alt=\"username\" />\r\n                    <div class=\"w-full pb-2\">\r\n                      <div class=\"flex justify-between\">\r\n                        <span class=\"block ml-2 font-semibold text-white\"> {{ chat.title }}</span>\r\n                        <span class=\"block ml-2 text-sm text-gray-600\">{{  chat.messageTime }}</span>\r\n                      </div>\r\n\r\n\r\n                      <div v-if=\"chat.messages.length !== 0\">\r\n                         <span class=\"block ml-2 text-sm text-gray-600\">{{   chat.lastMessage}}</span>\r\n                      </div>\r\n                      <div v-else>\r\n                        <span class=\"block ml-2 text-sm text-gray-600\"> New Chat </span>\r\n                      </div>\r\n                    </div>\r\n                  </a>\r\n              </div>\r\n<!--              <a-->\r\n<!--                  class=\"flex items-center px-3 py-2 text-sm transition duration-150 ease-in-out bg-gray-100 border-b border-gray-300 cursor-pointer focus:outline-none\">-->\r\n<!--                <img class=\"object-cover w-10 h-10 rounded-full\"-->\r\n<!--                     src=\"https://cdn.pixabay.com/photo/2016/06/15/15/25/loudspeaker-1459128__340.png\" alt=\"username\" />-->\r\n<!--                <div class=\"w-full pb-2\">-->\r\n<!--                  <div class=\"flex justify-between\">-->\r\n<!--                    <span class=\"block ml-2 font-semibold text-gray-600\">Same</span>-->\r\n<!--                    <span class=\"block ml-2 text-sm text-gray-600\">50 minutes</span>-->\r\n<!--                  </div>-->\r\n<!--                  <span class=\"block ml-2 text-sm text-gray-600\">Good night</span>-->\r\n<!--                </div>-->\r\n<!--              </a>-->\r\n\r\n            </li>\r\n          </ul>\r\n        </div>\r\n\r\n      <!--         START CHAT  -->\r\n\r\n        <div class=\"hidden lg:col-span-2 lg:block bg-white\">\r\n          <div class=\"w-full\">\r\n            <div class=\"relative flex items-center p-3 border-b border-gray-300\">\r\n              <img class=\"object-cover w-10 h-10 rounded-full\"\r\n                   src=\"https://cdn.pixabay.com/photo/2018/01/15/07/51/woman-3083383__340.jpg\" alt=\"username\" />\r\n              <span class=\"block ml-2 font-bold text-gray-600\"> {{ selected_chat.title }}</span>\r\n              <span class=\"absolute w-3 h-3 bg-green-600 rounded-full left-10 top-3\">\r\n                </span>\r\n            </div>\r\n\r\n<!--            -->\r\n            <div class=\"relative w-full p-6 overflow-y-auto h-[40rem]\">\r\n              <ul class=\"space-y-2\" v-for=\"messages in selected_chat.messages\">\r\n\r\n\r\n\r\n\r\n                <!--      YOUR MESSAGES        -->\r\n                <div v-if=\"messages.sender === this.auth_user['username']\">\r\n                  <li class=\"flex justify-end\">\r\n                    <div class=\"relative max-w-xl px-4 py-2 text-gray-700 bg-gray-100 rounded shadow\">\r\n                      <span class=\"block\">{{ messages.message }}</span>\r\n                    </div>\r\n                  </li>\r\n                </div>\r\n\r\n                <!--     FRIEND MESSAGES           -->\r\n                <div v-else>\r\n                  <li class=\"flex justify-start\">\r\n                    <div class=\"relative max-w-xl px-4 py-2 text-gray-700 rounded shadow\">\r\n                      <span class=\"block\">{{ messages.message }}</span>\r\n                    </div>\r\n                  </li>\r\n                </div>\r\n              </ul>\r\n            </div>\r\n\r\n            <div class=\"flex items-center justify-between w-full p-3 border-t border-gray-300\">\r\n              <button>\r\n                <svg xmlns=\"http://www.w3.org/2000/svg\" class=\"w-6 h-6 text-gray-500\" fill=\"none\" viewBox=\"0 0 24 24\"\r\n                     stroke=\"currentColor\">\r\n                  <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\"\r\n                        d=\"M14.828 14.828a4 4 0 01-5.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z\" />\r\n                </svg>\r\n              </button>\r\n              <button>\r\n                <svg xmlns=\"http://www.w3.org/2000/svg\" class=\"w-5 h-5 text-gray-500\" fill=\"none\" viewBox=\"0 0 24 24\"\r\n                     stroke=\"currentColor\">\r\n                  <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\"\r\n                        d=\"M15.172 7l-6.586 6.586a2 2 0 102.828 2.828l6.414-6.586a4 4 0 00-5.656-5.656l-6.415 6.585a6 6 0 108.486 8.486L20.5 13\" />\r\n                </svg>\r\n              </button>\r\n\r\n              <input type=\"text\" placeholder=\"Message\"\r\n                     class=\"block w-full py-2 pl-4 mx-3 bg-gray-100 rounded-full outline-none focus:text-gray-700\"\r\n                     name=\"message\" v-model=\"send_message\"  required />\r\n              <button>\r\n                <svg xmlns=\"http://www.w3.org/2000/svg\" class=\"w-5 h-5 text-gray-500\" fill=\"none\" viewBox=\"0 0 24 24\"\r\n                     stroke=\"currentColor\">\r\n                  <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\"\r\n                        d=\"M19 11a7 7 0 01-7 7m0 0a7 7 0 01-7-7m7 7v4m0 0H8m4 0h4m-4-8a3 3 0 01-3-3V5a3 3 0 116 0v6a3 3 0 01-3 3z\" />\r\n                </svg>\r\n              </button>\r\n              <button type=\"submit\" @click=\"send\">\r\n                <svg class=\"w-5 h-5 text-gray-500 origin-center transform rotate-90\" xmlns=\"http://www.w3.org/2000/svg\"\r\n                     viewBox=\"0 0 20 20\" fill=\"currentColor\">\r\n                  <path\r\n                      d=\"M10.894 2.553a1 1 0 00-1.788 0l-7 14a1 1 0 001.169 1.409l5-1.429A1 1 0 009 15.571V11a1 1 0 112 0v4.571a1 1 0 00.725.962l5 1.428a1 1 0 001.17-1.408l-7-14z\" />\r\n                </svg>\r\n              </button>\r\n             </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n      </div>\r\n\r\n</template>\r\n\r\n<script>\r\nimport SockJS from \"sockjs-client\";\r\nimport Stomp from \"webstomp-client\";\r\nimport AuthService from \"@/services/auth.service\";\r\nimport ChatService from \"@/services/chat.service\";\r\nimport axios from \"axios\";\r\n\r\nexport default {\r\n  name: \"MyChat\",\r\n\r\n  data() {\r\n    return {\r\n      received_messages: Array,\r\n      your_messages: Array,\r\n      selected_chat: Object,\r\n      auth_user: JSON.parse(localStorage.getItem(\"user\")),\r\n      chats: [{\r\n        id: Number,\r\n        title: String,\r\n        messageTime: Date,\r\n        lastMessage: String,\r\n        messageCount: Number,\r\n        personList: Array,\r\n        messages: Array\r\n      }],\r\n      person_id: Number,\r\n      send_message: null,\r\n      chat_messages: Map,\r\n      connected: false,\r\n      test: null\r\n    };\r\n  },\r\n  methods: {\r\n\r\n    selectChat(selected_chat){\r\n      this.selected_chat = selected_chat;\r\n\r\n\r\n    },\r\n    logout(){\r\n      this.$store.dispatch('auth/logout').then(\r\n          () => {\r\n            this.$router.push('/auth/login')\r\n          },\r\n\r\n      );\r\n    },\r\n\r\n    send() {\r\n\r\n      let person= this.selected_chat.messages.find(message => message.sender === this.auth_user['username']);\r\n\r\n      console.log(\"Send message:\" + this.send_message);\r\n      if (this.stompClient && this.stompClient.connected && this.send_message !== null) {\r\n        const msg = { name: this.send_message };\r\n        console.log(JSON.stringify(msg));\r\n        this.stompClient.send(\"/app/chat\", JSON.stringify( {\r\n          'id' : this.selected_chat.messages[this.selected_chat.messages.length - 1].id++,\r\n          'message' :  this.send_message,\r\n          'person_id' : person.person_id,\r\n          'sender' : this.auth_user['username']\r\n        }), {});\r\n\r\n      }\r\n      this.send_message = null;\r\n    },\r\n\r\n    connect() {\r\n\r\n      this.socket = new SockJS(\"http://localhost:8022/gs-chat\");\r\n      this.stompClient = Stomp.over(this.socket);\r\n\r\n      this.stompClient.connect(\r\n          {\"Authorization\": \"Bearer \" + AuthService.getToken()},\r\n          frame => {\r\n\r\n            console.log(\"FUCK   \" + frame)\r\n            this.connected = true;\r\n            this.stompClient.subscribe(\"/topic/chat\", tick => {\r\n              this.selected_chat.messages.push(JSON.parse(tick.body))\r\n            });\r\n          },\r\n          error => {\r\n            console.log(error.body);\r\n            this.connected = false;\r\n          }\r\n      );\r\n    },\r\n\r\n    async getAllChats(){\r\n\r\n      await axios.get( \"http://localhost:8022/api/chats/\",\r\n          {headers: {Authorization: localStorage.getItem(\"Authorization\")}}\r\n      ).then(response => {\r\n\r\n        for (let i = 0; i < response.data.length ; i++) {\r\n\r\n\r\n          let dataChat = {\r\n            id: response.data[i].id,\r\n            title: response.data[i].title,\r\n            messageTime: response.data[i].messageTime,\r\n            lastMessage: response.data[i].lastMessage,\r\n            messageCount: response.data[i].messageCount,\r\n            personList: response.data[i].personList,\r\n            messages: response.data[i].messages,\r\n          };\r\n\r\n          console.log(dataChat);\r\n\r\n          this.chats.push(dataChat)\r\n        }\r\n      }).catch(error => {\r\n        localStorage.removeItem(\"Authorization\");\r\n        localStorage.removeItem(\"user\");\r\n        console.log(error)\r\n      });\r\n\r\n      this.chats.splice(0, 1);\r\n\r\n    },\r\n\r\n    disconnect() {\r\n      if (this.stompClient) {\r\n        this.stompClient.disconnect();\r\n      }\r\n      this.connected = false;\r\n    },\r\n\r\n    tickleConnection() {\r\n      this.connected ? this.disconnect() : this.connect();\r\n    }\r\n  },\r\n\r\n\r\n async mounted() {\r\n   await this.getAllChats();\r\n\r\n   if (this.chats.length !== 0)\r\n     this.selected_chat = this.chats[0];\r\n\r\n   this.connect();\r\n  },\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n\r\n\r\n</style>"]},"metadata":{},"sourceType":"module"}